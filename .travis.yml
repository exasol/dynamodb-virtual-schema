language: java
sudo: required
matrix:
  include:
  - jdk: openjdk11
addons:
  sonarcloud:
    organization: exasol
before_install:
- nvm install 12
install:
- travis_retry mvn dependency:resolve
- npm install -g bootprint bootprint-json-schema
before_script:
- tools/version.sh verify
script:
- mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent org.jacoco:jacoco-maven-plugin:prepare-agent-integration
  verify sonar:sonar -Dsonar.login=${SONAR_TOKEN}
after_script:
- |- #generate documentation and push to github pages
  if [[ "$TRAVIS_BRANCH" = "develop" && "$TRAVIS_PULL_REQUEST" = "false" ]] ; then
    source .ci/setup-ssh.sh || travis_terminate 1
    .ci/generateDocumentation.sh || travis_terminate 1
  fi
cache:
  directories:
  - "$HOME/.m2"
